# **Инструкция по установке и запуску:**
_У Вас должен быть установлен Oracle(он на стороне клиента), DBeaver, PyCharm, Anaconda, git, python(версия 3.9)._

 Переходим по [ссылке](https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html)
и скачиваем последнюю версию в виде архива. Архив распаковываем, папку instantclient_21_12 по такому пути(можно задать свой путь к этой папке, он понадобится далее):
```
C:\Program Files\Oracle\instantclient_21_12
```
 Теперь нам нужно добавить этот адрес в переменные среды на ПК.

Порядок действий может быть такой:

> Нажать на "Этот компьютер" правой кнопкой мыши => "свойства" => "Дополнительные параметры системы" => "переменные среды".
> 
> В "Системные переменные" есть "Path", кликнуть на него => "создать" => добавить адрес - C:\Program Files\Oracle\instantclient_21_12. Далее два раза ок.

 В директории, в которой будет сохранен проект открыть Git Bash и ввести команду:
```
git clone https://github.com/AnastasyiaDyakonova/web-app.git.
```
В результате команды, должен появиться проект в директории.

Далее открыть PyCharm, нажать на File => Open, выбрать путь к приложению.
Нажать ок => This Window. Должен открыться скелет проекта.
Нажать на alt+f12, внизу откроется окно терминала. 
Проверить Ваш путь, он должен заканчиваться на \web-app>
Далее ввести команду:
```
python -m venv venv
```
Она создает виртуальное окружение проекта. В скелете приложения должна появиться папка venv.

Далее в терминале последовательно ввести команды:
```
venv\Scripts\activate
python -m pip install --upgrade pip
pip install -r requirement.txt
```

Перейти в папку mysite и открыть файл manage.py. В этом блоке:
```
lib_dir = r"C:\Program Files\Oracle\instantclient_21_12"
```
заменить на Ваш путь instantclient_2


В терминале ввести следующие команды:
```
 cd mysite
 python manage.py makemigrations
 python manage.py migrate
```
В результате создастся файл с миграциями, который хранит всю информацию о созданных в проекте моделях. Миграции применятся, в результате чего в базе создадутся новые таблицы.

Далее ввести:
```
 python manage.py runscript createtable
 python load_route.py
 python load_step.py
 python load_driver_report.py
 python load_user.py
 python load_task.py
```
В результате будут созданы таблицы для реализации ETL-процесса и необходимые представления. Также будут загружены тестовые данные в таблицы-источники.

Для того, чтобы запустить сервер и начать пользоваться сайтом, ввести:
```
 python manage.py runserver
```
Перейти по [ссылке](http://127.0.0.1:8000/).

Для того, чтобы запустить скрипт обработки хранилища данных на ежедневной основе(в 22-51), перейди по [ссылке](http://127.0.0.1:8000/start_job/).
Для того, чтобы прекратить по [ссылке](http://127.0.0.1:8000/stop_job/).

Документация находится в папке docs. Нужно открыть файл index.html.
Также документация доступна по [ссылке](https://anastasyiadyakonova.github.io/web-app/), но в менее читабельном виде.

